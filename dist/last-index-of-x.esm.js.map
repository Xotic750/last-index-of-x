{"version":3,"sources":["../src/last-index-of-x.js"],"names":[],"mappings":"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","file":"last-index-of-x.esm.js","sourcesContent":["import numberIsNaN from 'is-nan-x';\nimport findLastIndex from 'find-last-index-x';\nimport isString from 'is-string';\nimport toObject from 'to-object-x';\nimport toLength from 'to-length-x';\nimport sameValueZero from 'same-value-zero-x';\nimport sameValue from 'same-value-x';\nimport calcFromIndexRight from 'calculate-from-index-right-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport attempt from 'attempt-x';\nimport toBoolean from 'to-boolean-x';\n\nconst nlio = [].lastIndexOf;\nconst nativeLastIndexOf = typeof nlio === 'function' && nlio;\n\nconst test1 = function test1() {\n  const res = attempt.call([0, 1], nativeLastIndexOf, 0, -3);\n\n  return res.threw === false && res.value === -1;\n};\n\nconst test2 = function test2() {\n  const res = attempt.call([0, 1, 0], nativeLastIndexOf, 0);\n\n  return res.threw === false && res.value === 2;\n};\n\nconst test3 = function test3() {\n  const res = attempt.call([0, -0], nativeLastIndexOf, 0);\n\n  return res.threw === false && res.value === 1;\n};\n\nconst test4 = function test4() {\n  const testArr = [];\n  testArr.length = 2;\n  /* eslint-disable-next-line no-void */\n  testArr[0] = void 0;\n  /* eslint-disable-next-line no-void */\n  const res = attempt.call(testArr, nativeLastIndexOf, void 0);\n\n  return res.threw === false && res.value === 0;\n};\n\nconst test5 = function test5() {\n  const res = attempt.call('abc', nativeLastIndexOf, 'c');\n\n  return res.threw === false && res.value === 2;\n};\n\nconst test6 = function test6() {\n  const res = attempt.call(\n    (function getArgs() {\n      /* eslint-disable-next-line prefer-rest-params */\n      return arguments;\n    })('a', 'b', 'c'),\n    nativeLastIndexOf,\n    'c',\n  );\n\n  return res.threw === false && res.value === 2;\n};\n\nconst isWorking = toBoolean(nativeLastIndexOf) && test1() && test2() && test3() && test4() && test5() && test6();\n\nconst implementation = function implementation() {\n  return function lastIndexOf(searchElement) {\n    /* eslint-disable-next-line babel/no-invalid-this */\n    const length = toLength(this.length);\n\n    if (length < 1) {\n      return -1;\n    }\n\n    /* eslint-disable-next-line prefer-rest-params */\n    let i = arguments[1];\n    while (i >= 0) {\n      /* eslint-disable-next-line babel/no-invalid-this */\n      if (i in this && searchElement === this[i]) {\n        return i;\n      }\n\n      i -= 1;\n    }\n\n    return -1;\n  };\n};\n\nconst pLastIndexOf = isWorking ? nativeLastIndexOf : implementation();\n\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @private\n * @param {Array} array - The array to search.\n * @param {*} searchElement - Element to locate in the array.\n * @param {number} fromIndex - The index at which to start searching backwards.\n * @param {Function} extendFn - The comparison function to use.\n * @returns {number} Returns index of found element, otherwise -1.\n */\nconst findLastIdxFrom = function findLastIndexFrom(array, searchElement, fromIndex, extendFn) {\n  let fIdx = fromIndex;\n  while (fIdx >= 0) {\n    if (fIdx in array && extendFn(array[fIdx], searchElement)) {\n      return fIdx;\n    }\n\n    fIdx -= 1;\n  }\n\n  return -1;\n};\n\n// eslint-disable jsdoc/check-param-names\n// noinspection JSCommentMatchesSignature\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @param {Array} array - The array to search.\n * @throws {TypeError} If `array` is `null` or `undefined`.\n * @param {*} searchElement - Element to locate in the `array`.\n * @param {number} [fromIndex] - The index at which to start searching\n *  backwards. Defaults to the array's length minus one, ie the whole array\n *  will be searched. If the index is greater than or equal to the length of\n *  the array, the whole array will be searched. If negative, it is taken as\n *  the offset from the end of the array. Note that even when the index is\n *  negative, the array is still searched from back to front. If the\n *  calculated index is less than 0, -1 is returned, ie the array will not\n *  be searched.\n * @param {string} [extend] - Extension type: `SameValue` or `SameValueZero`.\n * @returns {number} Returns index of found element, otherwise -1.\n */\n// eslint-enable jsdoc/check-param-names\nconst lastIndexOf = function lastIndexOf(array, searchElement) {\n  const object = toObject(array);\n  const iterable = splitIfBoxedBug(object);\n  const length = toLength(iterable.length);\n\n  if (length < 1) {\n    return -1;\n  }\n\n  const argLength = arguments.length;\n  /* eslint-disable-next-line prefer-rest-params */\n  let extend = argLength > 2 && argLength > 3 ? arguments[3] : arguments[2];\n  let extendFn;\n\n  if (isString(extend)) {\n    extend = extend.toLowerCase();\n\n    if (extend === 'samevalue') {\n      extendFn = sameValue;\n    } else if (extend === 'samevaluezero') {\n      extendFn = sameValueZero;\n    }\n  }\n\n  let fromIndex = length - 1;\n\n  if (extendFn && (searchElement === 0 || numberIsNaN(searchElement))) {\n    if (argLength > 3) {\n      /* eslint-disable-next-line prefer-rest-params */\n      fromIndex = calcFromIndexRight(iterable, arguments[2]);\n\n      if (fromIndex < 0) {\n        return -1;\n      }\n\n      if (fromIndex >= length) {\n        fromIndex = length - 1;\n      }\n    }\n\n    if (fromIndex < length - 1) {\n      return findLastIdxFrom(iterable, searchElement, fromIndex, extendFn);\n    }\n\n    return findLastIndex(iterable, (element, index) => {\n      return index in iterable && extendFn(searchElement, element);\n    });\n  }\n\n  if (argLength > 3 || (argLength > 2 && Boolean(extendFn) === false)) {\n    /* eslint-disable-next-line prefer-rest-params */\n    fromIndex = calcFromIndexRight(iterable, arguments[2]);\n\n    if (fromIndex < 0) {\n      return -1;\n    }\n\n    if (fromIndex >= length) {\n      fromIndex = length - 1;\n    }\n  }\n\n  return pLastIndexOf.call(iterable, searchElement, fromIndex);\n};\n\nexport default lastIndexOf;\n"]}