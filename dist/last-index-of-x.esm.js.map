{"version":3,"sources":["../src/last-index-of-x.js"],"names":[],"mappings":"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","file":"last-index-of-x.esm.js","sourcesContent":["import numberIsNaN from 'is-nan-x';\nimport findLastIndex from 'find-last-index-x';\nimport isString from 'is-string';\nimport toObject from 'to-object-x';\nimport toLength from 'to-length-x';\nimport sameValueZero from 'same-value-zero-x';\nimport sameValue from 'same-value-x';\nimport calcFromIndexRight from 'calculate-from-index-right-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport attempt from 'attempt-x';\nimport toBoolean from 'to-boolean-x';\nimport objectCreate from 'object-create-x';\n\nconst nlio = [].lastIndexOf;\nconst nativeLastIndexOf = typeof nlio === 'function' && nlio;\nconst {toLowerCase} = '';\n\nconst mapExtendFn = objectCreate(null, {\n  samevalue: {\n    enumerable: true,\n    value: sameValue,\n  },\n  samevaluezero: {\n    enumerable: true,\n    value: sameValueZero,\n  },\n});\n\nconst test1 = function test1() {\n  const res = attempt.call([0, 1], nativeLastIndexOf, 0, -3);\n\n  return res.threw === false && res.value === -1;\n};\n\nconst test2 = function test2() {\n  const res = attempt.call([0, 1, 0], nativeLastIndexOf, 0);\n\n  return res.threw === false && res.value === 2;\n};\n\nconst test3 = function test3() {\n  const res = attempt.call([0, -0], nativeLastIndexOf, 0);\n\n  return res.threw === false && res.value === 1;\n};\n\nconst test4 = function test4() {\n  const testArr = [];\n  testArr.length = 2;\n  /* eslint-disable-next-line no-void */\n  testArr[0] = void 0;\n  /* eslint-disable-next-line no-void */\n  const res = attempt.call(testArr, nativeLastIndexOf, void 0);\n\n  return res.threw === false && res.value === 0;\n};\n\nconst test5 = function test5() {\n  const res = attempt.call('abc', nativeLastIndexOf, 'c');\n\n  return res.threw === false && res.value === 2;\n};\n\nconst test6 = function test6() {\n  const res = attempt.call(\n    (function getArgs() {\n      /* eslint-disable-next-line prefer-rest-params */\n      return arguments;\n    })('a', 'b', 'c'),\n    nativeLastIndexOf,\n    'c',\n  );\n\n  return res.threw === false && res.value === 2;\n};\n\nconst isWorking = toBoolean(nativeLastIndexOf) && test1() && test2() && test3() && test4() && test5() && test6();\n\nconst implementation = function implementation() {\n  return function lastIndexOf(searchElement) {\n    const length = toLength(this.length); /* eslint-disable-line babel/no-invalid-this */\n\n    if (length < 1) {\n      return -1;\n    }\n\n    let i = arguments[1]; /* eslint-disable-line prefer-rest-params */\n    while (i >= 0) {\n      if (i in this && searchElement === this[i] /* eslint-disable-line babel/no-invalid-this */) {\n        return i;\n      }\n\n      i -= 1;\n    }\n\n    return -1;\n  };\n};\n\nconst pLastIndexOf = isWorking ? nativeLastIndexOf : implementation();\n\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @private\n * @param {Array} array - The array to search.\n * @param {*} searchElement - Element to locate in the array.\n * @param {number} fromIndex - The index at which to start searching backwards.\n * @param {Function} extendFn - The comparison function to use.\n * @returns {number} Returns index of found element, otherwise -1.\n */\nconst findLastIdxFrom = function findLastIndexFrom(array, searchElement, fromIndex, extendFn) {\n  let fIdx = fromIndex;\n  while (fIdx >= 0) {\n    if (fIdx in array && extendFn(array[fIdx], searchElement)) {\n      return fIdx;\n    }\n\n    fIdx -= 1;\n  }\n\n  return -1;\n};\n\nconst getExtendFn = function getExtendFn(extend) {\n  return isString(extend) ? mapExtendFn[toLowerCase.call(extend)] : null;\n};\n\nconst getExtendValue = function getExtendValue(args) {\n  return args.length > 2 && args.length > 3 ? args[3] : args[2];\n};\n\nconst runFindIndex = function runFindIndex(obj) {\n  const {fromIndex, length, iterable, searchElement, extendFn} = obj;\n\n  return fromIndex < length - 1\n    ? findLastIdxFrom(iterable, searchElement, fromIndex, extendFn)\n    : findLastIndex(iterable, function iteratee(element, index) {\n        return index in iterable && extendFn(searchElement, element);\n      });\n};\n\nconst runExtendFn = function runExtendFn(obj) {\n  const {length, args, iterable, searchElement, extendFn} = obj;\n  let fromIndex = length - 1;\n\n  if (args.length > 3) {\n    fromIndex = calcFromIndexRight(iterable, args[2]);\n\n    if (fromIndex < 0) {\n      return -1;\n    }\n\n    if (fromIndex >= length) {\n      fromIndex = length - 1;\n    }\n  }\n\n  return runFindIndex({fromIndex, length, iterable, searchElement, extendFn});\n};\n\nconst getFromIndex = function getFromIndex(obj) {\n  const {args, length, extendFn, iterable} = obj;\n  let fromIndex = length - 1;\n\n  if (args.length > 3 || (args.length > 2 && toBoolean(extendFn) === false)) {\n    fromIndex = calcFromIndexRight(iterable, args[2]);\n\n    if (fromIndex < 0) {\n      return -1;\n    }\n\n    fromIndex = fromIndex >= length ? length - 1 : fromIndex;\n  }\n\n  return fromIndex;\n};\n\n// eslint-disable jsdoc/check-param-names\n// noinspection JSCommentMatchesSignature\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @param {Array} array - The array to search.\n * @throws {TypeError} If `array` is `null` or `undefined`.\n * @param {*} searchElement - Element to locate in the `array`.\n * @param {number} [fromIndex] - The index at which to start searching\n *  backwards. Defaults to the array's length minus one, ie the whole array\n *  will be searched. If the index is greater than or equal to the length of\n *  the array, the whole array will be searched. If negative, it is taken as\n *  the offset from the end of the array. Note that even when the index is\n *  negative, the array is still searched from back to front. If the\n *  calculated index is less than 0, -1 is returned, ie the array will not\n *  be searched.\n * @param {string} [extend] - Extension type: `SameValue` or `SameValueZero`.\n * @returns {number} Returns index of found element, otherwise -1.\n */\n// eslint-enable jsdoc/check-param-names\nconst lastIndexOf = function lastIndexOf(array, searchElement) {\n  const object = toObject(array);\n  const iterable = splitIfBoxedBug(object);\n  const length = toLength(iterable.length);\n\n  if (length < 1) {\n    return -1;\n  }\n\n  const extend = getExtendValue(arguments); /* eslint-disable-line prefer-rest-params */\n  const extendFn = getExtendFn(extend);\n\n  if (extendFn && (searchElement === 0 || numberIsNaN(searchElement))) {\n    return runExtendFn({length, args: arguments, iterable, searchElement, extendFn}); /* eslint-disable-line prefer-rest-params */\n  }\n\n  const fromIndex = getFromIndex({args: arguments, length, extendFn, iterable}); /* eslint-disable-line prefer-rest-params */\n\n  return fromIndex < 0 ? -1 : pLastIndexOf.call(iterable, searchElement, fromIndex);\n};\n\nexport default lastIndexOf;\n"]}