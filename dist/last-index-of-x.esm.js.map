{"version":3,"sources":["../src/last-index-of-x.js"],"names":[],"mappings":"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","file":"last-index-of-x.esm.js","sourcesContent":["import numberIsNaN from 'is-nan-x';\nimport findLastIndex from 'find-last-index-x';\nimport isString from 'is-string';\nimport toObject from 'to-object-x';\nimport toLength from 'to-length-x';\nimport sameValueZero from 'same-value-zero-x';\nimport sameValue from 'same-value-x';\nimport calcFromIndexRight from 'calculate-from-index-right-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport attempt from 'attempt-x';\n\nlet pLastIndexOf = typeof Array.prototype.lastIndexOf === 'function' && Array.prototype.lastIndexOf;\n\nlet isWorking;\n\nif (pLastIndexOf) {\n  let res = attempt.call([0, 1], pLastIndexOf, 0, -3);\n  isWorking = res.threw === false && res.value === -1;\n\n  if (isWorking) {\n    res = attempt.call([0, 1, 0], pLastIndexOf, 0);\n    isWorking = res.threw === false && res.value === 2;\n  }\n\n  if (isWorking) {\n    res = attempt.call([0, -0], pLastIndexOf, 0);\n    isWorking = res.threw === false && res.value === 1;\n  }\n\n  if (isWorking) {\n    const testArr = [];\n    testArr.length = 2;\n    /* eslint-disable-next-line no-void */\n    testArr[0] = void 0;\n    /* eslint-disable-next-line no-void */\n    res = attempt.call(testArr, pLastIndexOf, void 0);\n    isWorking = res.threw === false && res.value === 0;\n  }\n\n  if (isWorking) {\n    res = attempt.call('abc', pLastIndexOf, 'c');\n    isWorking = res.threw === false && res.value === 2;\n  }\n\n  if (isWorking) {\n    res = attempt.call(\n      (function getArgs() {\n        /* eslint-disable-next-line prefer-rest-params */\n        return arguments;\n      })('a', 'b', 'c'),\n      pLastIndexOf,\n      'c',\n    );\n    isWorking = res.threw === false && res.value === 2;\n  }\n}\n\nif (isWorking !== true) {\n  pLastIndexOf = function lastIndexOf(searchElement) {\n    /* eslint-disable-next-line babel/no-invalid-this */\n    const length = toLength(this.length);\n\n    if (length < 1) {\n      return -1;\n    }\n\n    /* eslint-disable-next-line prefer-rest-params */\n    let i = arguments[1];\n    while (i >= 0) {\n      /* eslint-disable-next-line babel/no-invalid-this */\n      if (i in this && searchElement === this[i]) {\n        return i;\n      }\n\n      i -= 1;\n    }\n\n    return -1;\n  };\n}\n\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @private\n * @param {Array} array - The array to search.\n * @param {*} searchElement - Element to locate in the array.\n * @param {number} fromIndex - The index at which to start searching backwards.\n * @param {Function} extendFn - The comparison function to use.\n * @returns {number} Returns index of found element, otherwise -1.\n */\nconst findLastIdxFrom = function findLastIndexFrom(array, searchElement, fromIndex, extendFn) {\n  let fIdx = fromIndex;\n  while (fIdx >= 0) {\n    if (fIdx in array && extendFn(array[fIdx], searchElement)) {\n      return fIdx;\n    }\n\n    fIdx -= 1;\n  }\n\n  return -1;\n};\n\n// eslint-disable jsdoc/check-param-names\n// noinspection JSCommentMatchesSignature\n/**\n * This method returns the last index at which a given element\n * can be found in the array, or -1 if it is not present.\n * The array is searched backwards, starting at fromIndex.\n *\n * @param {Array} array - The array to search.\n * @throws {TypeError} If `array` is `null` or `undefined`.\n * @param {*} searchElement - Element to locate in the `array`.\n * @param {number} [fromIndex] - The index at which to start searching\n *  backwards. Defaults to the array's length minus one, ie the whole array\n *  will be searched. If the index is greater than or equal to the length of\n *  the array, the whole array will be searched. If negative, it is taken as\n *  the offset from the end of the array. Note that even when the index is\n *  negative, the array is still searched from back to front. If the\n *  calculated index is less than 0, -1 is returned, ie the array will not\n *  be searched.\n * @param {string} [extend] - Extension type: `SameValue` or `SameValueZero`.\n * @returns {number} Returns index of found element, otherwise -1.\n */\n// eslint-enable jsdoc/check-param-names\nconst lastIndexOf = function lastIndexOf(array, searchElement) {\n  const object = toObject(array);\n  const iterable = splitIfBoxedBug(object);\n  const length = toLength(iterable.length);\n\n  if (length < 1) {\n    return -1;\n  }\n\n  const argLength = arguments.length;\n  /* eslint-disable-next-line prefer-rest-params */\n  let extend = argLength > 2 && argLength > 3 ? arguments[3] : arguments[2];\n  let extendFn;\n\n  if (isString(extend)) {\n    extend = extend.toLowerCase();\n\n    if (extend === 'samevalue') {\n      extendFn = sameValue;\n    } else if (extend === 'samevaluezero') {\n      extendFn = sameValueZero;\n    }\n  }\n\n  let fromIndex = length - 1;\n\n  if (extendFn && (searchElement === 0 || numberIsNaN(searchElement))) {\n    if (argLength > 3) {\n      /* eslint-disable-next-line prefer-rest-params */\n      fromIndex = calcFromIndexRight(iterable, arguments[2]);\n\n      if (fromIndex < 0) {\n        return -1;\n      }\n\n      if (fromIndex >= length) {\n        fromIndex = length - 1;\n      }\n    }\n\n    if (fromIndex < length - 1) {\n      return findLastIdxFrom(iterable, searchElement, fromIndex, extendFn);\n    }\n\n    return findLastIndex(iterable, (element, index) => {\n      return index in iterable && extendFn(searchElement, element);\n    });\n  }\n\n  if (argLength > 3 || (argLength > 2 && Boolean(extendFn) === false)) {\n    /* eslint-disable-next-line prefer-rest-params */\n    fromIndex = calcFromIndexRight(iterable, arguments[2]);\n\n    if (fromIndex < 0) {\n      return -1;\n    }\n\n    if (fromIndex >= length) {\n      fromIndex = length - 1;\n    }\n  }\n\n  return pLastIndexOf.call(iterable, searchElement, fromIndex);\n};\n\nexport default lastIndexOf;\n"]}